<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Complete Registration | VTU Website</title>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <!-- SUPABASE CDN -->
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2.39.7/dist/umd/supabase.min.js"></script>
    <style>
        .registration-container {
            max-width: 500px;
            margin: 50px auto;
            padding: 20px;
        }
        
        .registration-box {
            background: white;
            border-radius: 16px;
            padding: 2rem;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
        }
        
        .progress-bar {
            display: flex;
            justify-content: space-between;
            margin-bottom: 2rem;
            position: relative;
        }
        
        .progress-bar::before {
            content: '';
            position: absolute;
            top: 15px;
            left: 0;
            right: 0;
            height: 3px;
            background: #e5e7eb;
            z-index: 1;
        }
        
        .progress-step {
            position: relative;
            z-index: 2;
            text-align: center;
            flex: 1;
        }
        
        .step-number {
            width: 30px;
            height: 30px;
            background: #e5e7eb;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto 5px;
            font-weight: bold;
            color: #6b7280;
        }
        
        .step-number.active {
            background: #2563eb;
            color: white;
        }
        
        .step-number.completed {
            background: #10b981;
            color: white;
        }
        
        .step-label {
            font-size: 0.8rem;
            color: #6b7280;
        }
        
        .registration-step {
            display: none;
        }
        
        .registration-step.active {
            display: block;
        }
        
        .step-title {
            text-align: center;
            margin-bottom: 1.5rem;
            color: #1e293b;
        }
        
        .step-navigation {
            display: flex;
            justify-content: space-between;
            margin-top: 2rem;
        }
        
        .verification-box {
            border: 2px dashed #d1d5db;
            border-radius: 10px;
            padding: 2rem;
            text-align: center;
            margin: 1rem 0;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .verification-box:hover {
            border-color: #2563eb;
            background: #f0f9ff;
        }
        
        .face-verification {
            width: 150px;
            height: 150px;
            margin: 0 auto;
            border: 2px dashed #d1d5db;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 3rem;
            color: #6b7280;
            cursor: pointer;
        }
        
        .face-verification.scanning {
            border-color: #2563eb;
            animation: pulse 1.5s infinite;
        }
        
        @keyframes pulse {
            0% { box-shadow: 0 0 0 0 rgba(37, 99, 235, 0.4); }
            70% { box-shadow: 0 0 0 10px rgba(37, 99, 235, 0); }
            100% { box-shadow: 0 0 0 0 rgba(37, 99, 235, 0); }
        }
        
        .pin-input {
            display: flex;
            justify-content: center;
            gap: 10px;
            margin: 1rem 0;
        }
        
        .pin-input input {
            width: 50px;
            height: 50px;
            text-align: center;
            font-size: 1.5rem;
            border: 2px solid #d1d5db;
            border-radius: 8px;
        }
        
        .pin-input input:focus {
            border-color: #2563eb;
            outline: none;
        }
        
        .success-animation {
            text-align: center;
            padding: 2rem;
        }
        
        .success-icon {
            font-size: 4rem;
            color: #10b981;
            margin-bottom: 1rem;
            animation: bounce 1s;
        }
        
        @keyframes bounce {
            0%, 20%, 60%, 100% { transform: translateY(0); }
            40% { transform: translateY(-20px); }
            80% { transform: translateY(-10px); }
        }
        
        .notification {
            background: #f0f9ff;
            border-left: 4px solid #2563eb;
            padding: 1rem;
            margin: 1rem 0;
            border-radius: 8px;
        }
    </style>
</head>
<body>
    <nav class="navbar">
        <div class="container">
            <a href="index.html" class="logo">VTU<span>Hub</span></a>
            <div class="nav-links">
                <a href="index.html">Home</a>
                <a href="auth.html">Login</a>
            </div>
        </div>
    </nav>

    <div class="container registration-container">
        <div class="registration-box">
            <!-- Progress Bar -->
            <div class="progress-bar">
                <div class="progress-step">
                    <div class="step-number active" id="step1">1</div>
                    <div class="step-label">Phone</div>
                </div>
                <div class="progress-step">
                    <div class="step-number" id="step2">2</div>
                    <div class="step-label">Personal</div>
                </div>
                <div class="progress-step">
                    <div class="step-number" id="step3">3</div>
                    <div class="step-label">NIN/BVN</div>
                </div>
                <div class="progress-step">
                    <div class="step-number" id="step4">4</div>
                    <div class="step-label">Face ID</div>
                </div>
                <div class="progress-step">
                    <div class="step-number" id="step5">5</div>
                    <div class="step-label">Address</div>
                </div>
                <div class="progress-step">
                    <div class="step-number" id="step6">6</div>
                    <div class="step-label">Password</div>
                </div>
                <div class="progress-step">
                    <div class="step-number" id="step7">7</div>
                    <div class="step-label">PIN</div>
                </div>
                <div class="progress-step">
                    <div class="step-number" id="step8">8</div>
                    <div class="step-label">Complete</div>
                </div>
            </div>

            <!-- Step 1: Phone Number -->
            <div class="registration-step active" id="step1Form">
                <h2 class="step-title">Phone Verification</h2>
                <div class="input-group">
                    <label for="phone">Phone Number</label>
                    <input type="tel" id="phone" placeholder="08012345678" required>
                    <small style="color: #6b7280; display: block; margin-top: 5px;">We'll send a verification code to this number</small>
                </div>
                <div class="step-navigation">
                    <button class="btn-secondary" onclick="window.location.href='auth.html'">Back to Login</button>
                    <button class="btn-primary" onclick="nextStep(2)">Verify Phone</button>
                </div>
            </div>

            <!-- Step 2: Personal Details -->
            <div class="registration-step" id="step2Form">
                <h2 class="step-title">Personal Information</h2>
                <div class="input-group">
                    <label for="firstName">First Name</label>
                    <input type="text" id="firstName" placeholder="John" required>
                </div>
                <div class="input-group">
                    <label for="lastName">Last Name</label>
                    <input type="text" id="lastName" placeholder="Doe" required>
                </div>
                <div class="input-group">
                    <label for="email">Email Address</label>
                    <input type="email" id="email" placeholder="john@example.com" required>
                </div>
                <div class="step-navigation">
                    <button class="btn-secondary" onclick="prevStep(1)">Back</button>
                    <button class="btn-primary" onclick="nextStep(3)">Next</button>
                </div>
            </div>

            <!-- Step 3: NIN/BVN Verification -->
            <div class="registration-step" id="step3Form">
                <h2 class="step-title">Identity Verification</h2>
                <p style="text-align: center; margin-bottom: 1.5rem; color: #6b7280;">
                    Please provide your NIN/BVN to verify your account opening
                </p>
                
                <div class="verification-box" onclick="selectVerification('nin')" id="ninBox">
                    <i class="fas fa-id-card" style="font-size: 2rem; color: #2563eb; margin-bottom: 1rem;"></i>
                    <h3>Verify with NIN</h3>
                    <p>11-digit National Identity Number</p>
                </div>
                
                <div class="verification-box" onclick="selectVerification('bvn')" id="bvnBox">
                    <i class="fas fa-credit-card" style="font-size: 2rem; color: #2563eb; margin-bottom: 1rem;"></i>
                    <h3>Verify with BVN</h3>
                    <p>Bank Verification Number</p>
                </div>
                
                <div id="verificationInput" style="display: none;">
                    <div class="input-group">
                        <label id="idLabel">NIN Number</label>
                        <input type="text" id="idNumber" placeholder="Enter 11-digit number" pattern="[0-9]{11}" required>
                    </div>
                </div>
                
                <div class="step-navigation">
                    <button class="btn-secondary" onclick="prevStep(2)">Back</button>
                    <button class="btn-primary" onclick="nextStep(4)" id="step3Next" disabled>Verify & Continue</button>
                </div>
            </div>

            <!-- Step 4: Face Verification -->
            <div class="registration-step" id="step4Form">
                <h2 class="step-title">Face Verification</h2>
                <p style="text-align: center; margin-bottom: 1.5rem; color: #6b7280;">
                    Please allow camera access for face verification
                </p>
                
                <div class="face-verification" id="faceScanner" onclick="startFaceScan()">
                    <i class="fas fa-user"></i>
                </div>
                
                <p id="scanStatus" style="text-align: center; margin-top: 1rem; color: #6b7280;">
                    Click the circle to start face scan
                </p>
                
                <div class="step-navigation">
                    <button class="btn-secondary" onclick="prevStep(3)">Back</button>
                    <button class="btn-primary" onclick="nextStep(5)" id="step4Next" disabled>Face Verified</button>
                </div>
            </div>

            <!-- Step 5: Residential Address -->
            <div class="registration-step" id="step5Form">
                <h2 class="step-title">Residential Address</h2>
                <div class="input-group">
                    <label for="state">State</label>
                    <select id="state" required onchange="loadLGAs()">
                        <option value="">Select State</option>
                        <option value="Lagos">Lagos</option>
                        <option value="Abuja">Abuja FCT</option>
                        <option value="Kano">Kano</option>
                        <option value="Rivers">Rivers</option>
                        <option value="Oyo">Oyo</option>
                    </select>
                </div>
                <div class="input-group">
                    <label for="lga">Local Government Area</label>
                    <select id="lga" required disabled>
                        <option value="">Select LGA</option>
                    </select>
                </div>
                <div class="input-group">
                    <label for="address">Full Address</label>
                    <textarea id="address" rows="3" placeholder="House number, Street, Area" required></textarea>
                </div>
                <div class="step-navigation">
                    <button class="btn-secondary" onclick="prevStep(4)">Back</button>
                    <button class="btn-primary" onclick="nextStep(6)">Next</button>
                </div>
            </div>

            <!-- Step 6: Password Creation -->
            <div class="registration-step" id="step6Form">
                <h2 class="step-title">Create Password</h2>
                <div class="input-group">
                    <label for="password">Password</label>
                    <input type="password" id="password" placeholder="Create strong password" required>
                    <div style="margin-top: 5px; font-size: 0.8rem; color: #6b7280;">
                        <i class="fas fa-info-circle"></i> Must be at least 8 characters with letters and numbers
                    </div>
                </div>
                <div class="input-group">
                    <label for="confirmPassword">Confirm Password</label>
                    <input type="password" id="confirmPassword" placeholder="Repeat password" required>
                </div>
                <div id="passwordMatch" style="display: none; color: #10b981; margin-top: 10px;">
                    <i class="fas fa-check-circle"></i> Passwords match
                </div>
                <div class="step-navigation">
                    <button class="btn-secondary" onclick="prevStep(5)">Back</button>
                    <button class="btn-primary" onclick="nextStep(7)" id="step6Next" disabled>Next</button>
                </div>
            </div>

            <!-- Step 7: Transaction PIN -->
            <div class="registration-step" id="step7Form">
                <h2 class="step-title">Create Transaction PIN</h2>
                <p style="text-align: center; margin-bottom: 1.5rem; color: #6b7280;">
                    Create a 4-digit PIN for your transactions
                </p>
                
                <div class="pin-input">
                    <input type="password" maxlength="1" oninput="moveToNext(this, 1)" pattern="[0-9]">
                    <input type="password" maxlength="1" oninput="moveToNext(this, 2)" pattern="[0-9]">
                    <input type="password" maxlength="1" oninput="moveToNext(this, 3)" pattern="[0-9]">
                    <input type="password" maxlength="1" oninput="moveToNext(this, 4)" pattern="[0-9]">
                </div>
                
                <div class="input-group" style="margin-top: 2rem;">
                    <label for="confirmPin">Confirm PIN</label>
                    <input type="password" id="confirmPin" placeholder="Enter 4-digit PIN again" maxlength="4" pattern="[0-9]{4}" required>
                </div>
                
                <div class="step-navigation">
                    <button class="btn-secondary" onclick="prevStep(6)">Back</button>
                    <button class="btn-primary" onclick="nextStep(8)" id="step7Next" disabled>Next</button>
                </div>
            </div>

            <!-- Step 8: Complete Registration -->
            <div class="registration-step" id="step8Form">
                <div class="success-animation">
                    <div class="success-icon">
                        <i class="fas fa-check-circle"></i>
                    </div>
                    <h2 class="step-title">Congratulations!</h2>
                    <p id="congratsName" style="color: #6b7280; margin-bottom: 1rem;">Welcome to VTUHub!</p>
                    
                    <div class="notification">
                        <h4><i class="fas fa-bell"></i> Registration Successful</h4>
                        <p>Your account has been created successfully. You'll receive a welcome email shortly.</p>
                    </div>
                    
                    <div class="notification">
                        <h4><i class="fas fa-shield-alt"></i> Account Secured</h4>
                        <p>Your account is protected with Face Verification and Transaction PIN.</p>
                    </div>
                    
                    <div style="margin-top: 2rem;">
                        <button class="btn-primary" onclick="completeRegistration()">
                            <i class="fas fa-sign-in-alt"></i> Login to Dashboard
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Registration data object
        const registrationData = {
            phone: '',
            firstName: '',
            lastName: '',
            email: '',
            verificationType: '',
            idNumber: '',
            state: '',
            lga: '',
            address: '',
            password: '',
            transactionPin: ''
        };
        
        let currentStep = 1;
        
        // Step navigation
        function nextStep(step) {
            // Validate current step
            if (!validateStep(currentStep)) {
                return;
            }
            
            // Save step data
            saveStepData(currentStep);
            
            // Update UI
            document.getElementById('step' + currentStep).classList.remove('active');
            document.getElementById('step' + currentStep).classList.add('completed');
            
            document.querySelector('.registration-step.active').classList.remove('active');
            
            currentStep = step;
            
            document.getElementById('step' + currentStep).classList.add('active');
            document.getElementById('step' + currentStep + 'Form').classList.add('active');
            
            // Special handling for step 8
            if (step === 8) {
                document.getElementById('congratsName').textContent = 
                    `Welcome ${registrationData.firstName} ${registrationData.lastName}!`;
            }
        }
        
        function prevStep(step) {
            document.querySelector('.registration-step.active').classList.remove('active');
            document.getElementById('step' + currentStep).classList.remove('active');
            
            currentStep = step;
            
            document.getElementById('step' + currentStep).classList.add('active');
            document.getElementById('step' + currentStep + 'Form').classList.add('active');
        }
        
        // Step validation
        function validateStep(step) {
            switch(step) {
                case 1:
                    const phone = document.getElementById('phone').value;
                    if (!phone || phone.length < 11) {
                        alert('Please enter a valid 11-digit phone number');
                        return false;
                    }
                    return true;
                    
                case 2:
                    const firstName = document.getElementById('firstName').value;
                    const lastName = document.getElementById('lastName').value;
                    const email = document.getElementById('email').value;
                    
                    if (!firstName || !lastName || !email) {
                        alert('Please fill in all personal details');
                        return false;
                    }
                    
                    if (!validateEmail(email)) {
                        alert('Please enter a valid email address');
                        return false;
                    }
                    return true;
                    
                case 3:
                    if (!registrationData.verificationType || !registrationData.idNumber) {
                        alert('Please select verification type and enter ID number');
                        return false;
                    }
                    return true;
                    
                case 4:
                    const scanStatus = document.getElementById('scanStatus').textContent;
                    if (!scanStatus.includes('Verified')) {
                        alert('Please complete face verification first');
                        return false;
                    }
                    return true;
                    
                case 5:
                    const state = document.getElementById('state').value;
                    const lga = document.getElementById('lga').value;
                    const address = document.getElementById('address').value;
                    
                    if (!state || !lga || !address) {
                        alert('Please fill in all address details');
                        return false;
                    }
                    return true;
                    
                case 6:
                    const password = document.getElementById('password').value;
                    const confirmPassword = document.getElementById('confirmPassword').value;
                    
                    if (!password || !confirmPassword) {
                        alert('Please enter and confirm your password');
                        return false;
                    }
                    
                    if (password.length < 8) {
                        alert('Password must be at least 8 characters');
                        return false;
                    }
                    
                    if (password !== confirmPassword) {
                        alert('Passwords do not match');
                        return false;
                    }
                    return true;
                    
                case 7:
                    const pinInputs = document.querySelectorAll('.pin-input input');
                    let pin = '';
                    pinInputs.forEach(input => {
                        pin += input.value;
                    });
                    
                    const confirmPin = document.getElementById('confirmPin').value;
                    
                    if (pin.length !== 4) {
                        alert('Please enter a complete 4-digit PIN');
                        return false;
                    }
                    
                    if (pin !== confirmPin) {
                        alert('PINs do not match');
                        return false;
                    }
                    return true;
                    
                default:
                    return true;
            }
        }
        
        // Save step data
        function saveStepData(step) {
            switch(step) {
                case 1:
                    registrationData.phone = document.getElementById('phone').value;
                    break;
                    
                case 2:
                    registrationData.firstName = document.getElementById('firstName').value;
                    registrationData.lastName = document.getElementById('lastName').value;
                    registrationData.email = document.getElementById('email').value;
                    break;
                    
                case 5:
                    registrationData.state = document.getElementById('state').value;
                    registrationData.lga = document.getElementById('lga').value;
                    registrationData.address = document.getElementById('address').value;
                    break;
                    
                case 6:
                    registrationData.password = document.getElementById('password').value;
                    break;
                    
                case 7:
                    const pinInputs = document.querySelectorAll('.pin-input input');
                    registrationData.transactionPin = '';
                    pinInputs.forEach(input => {
                        registrationData.transactionPin += input.value;
                    });
                    break;
            }
        }
        
        // Email validation
        function validateEmail(email) {
            const re = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
            return re.test(email);
        }
        
        // NIN/BVN selection
        function selectVerification(type) {
            registrationData.verificationType = type;
            
            // Update UI
            document.getElementById('ninBox').style.borderColor = type === 'nin' ? '#2563eb' : '#d1d5db';
            document.getElementById('ninBox').style.backgroundColor = type === 'nin' ? '#f0f9ff' : 'white';
            
            document.getElementById('bvnBox').style.borderColor = type === 'bvn' ? '#2563eb' : '#d1d5db';
            document.getElementById('bvnBox').style.backgroundColor = type === 'bvn' ? '#f0f9ff' : 'white';
            
            // Show input field
            document.getElementById('verificationInput').style.display = 'block';
            document.getElementById('idLabel').textContent = type === 'nin' ? 'NIN Number' : 'BVN Number';
            document.getElementById('idNumber').placeholder = type === 'nin' ? 'Enter 11-digit NIN' : 'Enter 11-digit BVN';
            
            // Enable next button when ID is entered
            document.getElementById('idNumber').addEventListener('input', function() {
                registrationData.idNumber = this.value;
                document.getElementById('step3Next').disabled = !(this.value.length === 11);
            });
        }
        
        // Face verification
        function startFaceScan() {
            const scanner = document.getElementById('faceScanner');
            const status = document.getElementById('scanStatus');
            
            scanner.classList.add('scanning');
            scanner.innerHTML = '<i class="fas fa-camera"></i>';
            status.textContent = 'Scanning face...';
            status.style.color = '#2563eb';
            
            // Simulate scanning process
            setTimeout(() => {
                scanner.classList.remove('scanning');
                scanner.innerHTML = '<i class="fas fa-check"></i>';
                scanner.style.borderColor = '#10b981';
                scanner.style.color = '#10b981';
                status.textContent = '✓ Face verified successfully';
                status.style.color = '#10b981';
                
                // Enable next button
                document.getElementById('step4Next').disabled = false;
            }, 3000);
        }
        
        // Load LGAs based on state
        function loadLGAs() {
            const state = document.getElementById('state').value;
            const lgaSelect = document.getElementById('lga');
            
            lgaSelect.innerHTML = '<option value="">Select LGA</option>';
            lgaSelect.disabled = !state;
            
            if (!state) return;
            
            // Sample LGAs for each state
            const lgas = {
                'Lagos': ['Agege', 'Alimosho', 'Apapa', 'Amuwo-Odofin', 'Badagry', 'Epe', 'Eti-Osa', 'Ibeju-Lekki', 'Ifako-Ijaiye', 'Ikeja', 'Ikorodu', 'Kosofe', 'Lagos Island', 'Lagos Mainland', 'Mushin', 'Ojo', 'Oshodi-Isolo', 'Shomolu', 'Surulere'],
                'Abuja': ['Abaji', 'Bwari', 'Gwagwalada', 'Kuje', 'Kwali', 'Municipal'],
                'Kano': ['Dala', 'Fagge', 'Gwale', 'Kano Municipal', 'Kumbotso', 'Nasarawa', 'Rano', 'Tarauni', 'Ungogo'],
                'Rivers': ['Port Harcourt', 'Obio-Akpor', 'Ikwerre', 'Etche', 'Oyigbo', 'Okrika', 'Ogu–Bolo', 'Eleme', 'Tai', 'Gokana', 'Khana', 'Ahoada East', 'Ahoada West', 'Abua–Odual'],
                'Oyo': ['Ibadan North', 'Ibadan North-East', 'Ibadan North-West', 'Ibadan South-East', 'Ibadan South-West', 'Akinyele', 'Lagelu', 'Egbeda', 'Oluyole', 'Ona Ara', 'Ibarapa']
            };
            
            lgas[state].forEach(lga => {
                const option = document.createElement('option');
                option.value = lga;
                option.textContent = lga;
                lgaSelect.appendChild(option);
            });
        }
        
        // PIN input navigation
        function moveToNext(input, index) {
            if (input.value.length === 1) {
                if (index < 4) {
                    const nextInput = input.parentElement.children[index];
                    nextInput.focus();
                }
            }
            
            // Enable next button when all PIN digits are filled
            const pinInputs = document.querySelectorAll('.pin-input input');
            let allFilled = true;
            pinInputs.forEach(pinInput => {
                if (pinInput.value.length !== 1) allFilled = false;
            });
            
            document.getElementById('step7Next').disabled = !allFilled;
        }
        
        // Password confirmation check
        document.getElementById('confirmPassword').addEventListener('input', function() {
            const password = document.getElementById('password').value;
            const confirm = this.value;
            const matchDiv = document.getElementById('passwordMatch');
            
            if (password && confirm) {
                if (password === confirm) {
                    matchDiv.style.display = 'block';
                    document.getElementById('step6Next').disabled = false;
                } else {
                    matchDiv.style.display = 'none';
                    document.getElementById('step6Next').disabled = true;
                }
            }
        });
        
        // Complete registration
        async function completeRegistration() {
            try {
                // Initialize Supabase
                const SUPABASE_URL = 'https://emsfczgikwhfjpgwkyqv.supabase.co';
                const SUPABASE_KEY = 'sb_publishable_AuyN3-6VqWkMn11d1T_wmg_-RagFA47';
                
                if (typeof supabase === 'undefined') {
                    alert('Error: Supabase not loaded');
                    return;
                }
                
                const supabaseClient = supabase.createClient(SUPABASE_URL, SUPABASE_KEY);
                
                // 1. Create auth user
                const { data: authData, error: authError } = await supabaseClient.auth.signUp({
                    email: registrationData.email,
                    password: registrationData.password
                });
                
                if (authError) throw authError;
                
                // 2. Create profile with all registration data
                const { error: profileError } = await supabaseClient
                    .from('profiles')
                    .insert({
                        id: authData.user.id,
                        email: registrationData.email,
                        full_name: `${registrationData.firstName} ${registrationData.lastName}`,
                        phone: registrationData.phone,
                        verification_type: registrationData.verificationType,
                        id_number: registrationData.idNumber,
                        state: registrationData.state,
                        lga: registrationData.lga,
                        address: registrationData.address,
                        transaction_pin: registrationData.transactionPin,
                        balance: 0.00,
                        created_at: new Date()
                    });
                
                if (profileError) throw profileError;
                
                // 3. Auto login
                const { error: loginError } = await supabaseClient.auth.signInWithPassword({
                    email: registrationData.email,
                    password: registrationData.password
                });
                
                if (loginError) throw loginError;
                
                // 4. Redirect to dashboard
                window.location.href = 'dashboard.html';
                
            } catch (error) {
                console.error('Registration error:', error);
                alert('Registration failed: ' + error.message);
            }
        }
        
        // Initialize
        document.addEventListener('DOMContentLoaded', function() {
            // Set email if coming from auth page
            const urlParams = new URLSearchParams(window.location.search);
            const email = urlParams.get('email');
            if (email) {
                document.getElementById('email').value = email;
            }
        });
    </script>
</body>
</html>
