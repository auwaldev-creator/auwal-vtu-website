<div class="card bg-primary text-white p-3 mb-3">
    <small>Wallet Balance</small>
    <h2 id="walletBalance">₦0.00</h2>
    
    <div class="mt-3 bg-white text-dark p-2 rounded d-flex justify-content-between">
        <div>
            <small class="text-muted" style="font-size:10px;">ACCOUNT NUMBER</small><br>
            <b id="accNum">Loading...</b>
        </div>
        <div>
            <small class="text-muted" style="font-size:10px;">BANK NAME</small><br>
            <b>Muryar VTU</b>
        </div>
    </div>
</div>

<script src="supabase-config.js"></script>
<script>
    async function loadDashboard() {
        const { data: { user } } = await supabase.auth.getUser();
        if (!user) window.location.href = "index.html"; // Redirect if not logged in

        let { data: profile, error } = await supabase
            .from('profiles')
            .select('*')
            .eq('id', user.id)
            .single();

        if (profile) {
            document.getElementById('walletBalance').innerText = "₦" + profile.wallet_balance.toLocaleString();
            document.getElementById('accNum').innerText = profile.account_number;
        }
    }
    loadDashboard();
</script>
